---
import Logo from "./Logo.astro";
import { Icon } from "astro-icon/components";

const pathname = new URL(Astro.request.url).pathname;

const navLinks = [
	{ href: "/", label: "Home", icon: "home" },
	{ href: "/projetos", label: "Projetos", icon: "projects" },
	{ href: "/sobre", label: "Sobre", icon: "info" },
];

const isActive = (href: string) => {
	if (href === "/") return pathname === "/";
	return pathname.startsWith(href);
};
---

<nav aria-label="Navegação principal">
	<div class="mx-auto max-w-4xl">
		<div class="flex items-center justify-between p-4">
			<h1 class="text-2xl text-amber-800">
				<a href="/" aria-label="Ir para página inicial">
					<Logo />
				</a>
			</h1>

			<ul class="flex gap-4" role="list">
				{
					navLinks.map(({ href, label, icon }) => (
						<li>
							<a
								href={href}
								class:list={[
									"flex items-center gap-2 transition-colors duration-200",
									isActive(href)
										? "font-medium text-amber-800"
										: "text-black hover:text-amber-800",
								]}
								aria-current={isActive(href) ? "page" : undefined}
							>
								<Icon class="text-2xl" name={icon} />
								<span class="hidden sm:inline">{label}</span>
							</a>
						</li>
					))
				}
			</ul>
		</div>
	</div>
</nav>
