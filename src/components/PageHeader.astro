---
import Logo from "./Logo.astro";
import { Icon } from "astro-icon/components";

const pathname = new URL(Astro.request.url).pathname;

const navLinks = [
	{ href: "/", label: "Home", icon: "home" },
	{ href: "/blog", label: "Blog", icon: "rss" },
	{ href: "/projetos", label: "Projetos", icon: "projects" },
	{ href: "/sobre", label: "Sobre", icon: "info" },
];

const isActive = (href: string) => {
	if (href === "/") return pathname === "/";
	return pathname.startsWith(href);
};
---

<header class="sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-100">
	<nav aria-label="Navegação principal" class="mx-auto max-w-4xl">
		<div class="flex items-center justify-between px-4 py-3">
			<a 
				href="/" 
				class="flex items-center gap-2 transition-transform hover:scale-105"
				aria-label="Ir para página inicial"
			>
				<Logo size="lg" />
			</a>

			<ul class="hidden sm:flex items-center gap-1" role="list">
				{navLinks.map(({ href, label, icon }) => (
					<li>
						<a
							href={href}
							class:list={[
								"flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",
								isActive(href)
									? "bg-amber-100 text-amber-800"
									: "text-gray-600 hover:bg-gray-100 hover:text-gray-900",
							]}
							aria-current={isActive(href) ? "page" : undefined}
						>
							<Icon class="w-4 h-4" name={icon} />
							{label}
						</a>
					</li>
				))}
			</ul>

			<ul class="flex sm:hidden items-center gap-2" role="list">
				{navLinks.map(({ href, label, icon }) => (
					<li>
						<a
							href={href}
							class:list={[
								"flex items-center justify-center w-10 h-10 rounded-full transition-all duration-200",
								isActive(href)
									? "bg-amber-100 text-amber-800"
									: "text-gray-600 hover:bg-gray-100",
							]}
							aria-current={isActive(href) ? "page" : undefined}
							aria-label={label}
						>
							<Icon class="w-5 h-5" name={icon} />
						</a>
					</li>
				))}
			</ul>
		</div>
	</nav>
</header>
