---
import type { CollectionEntry } from "astro:content";

import "@/styles/global.css";

import { SITE } from "@/consts";
import PageHead from "@/components/PageHead.astro";
import PageHeader from "@/components/PageHeader.astro";
import PageFooter from "@/components/PageFooter.astro";
import Prose from "@/components/Prose.astro";
import PostSocialShare from "@/components/PostSocialShare.astro";
import AuthorBox from "@/components/AuthorBox.astro";

type Props = CollectionEntry<"blog">["data"] & {
	id: string;
	readingTime?: number;
};

const { id, title, description, image, pubDate, readingTime = 5 } = Astro.props;
---

<!doctype html>
<html lang={SITE.LANGUAGE}>
	<head>
		<PageHead title={`${title} | ${SITE.TITLE}`} description={description} />
	</head>
	<body class="border-t-8 border-amber-300">
		<PageHeader />

		<main class="mx-auto max-w-4xl px-4 py-8" transition:animate="fade">
			<article>
				<h1
					class="mt-6 text-3xl leading-tight font-bold tracking-tight text-gray-900 sm:text-4xl lg:text-5xl"
					transition:animate="slide"
				>
					{title}
				</h1>

				{
					description && (
						<p class="mt-4 text-lg text-gray-600" transition:animate="slide">
							{description}
						</p>
					)
				}

				<figure class="mt-8 mb-12 overflow-hidden rounded-xl">
					<img
						transition:name={`post-image-${id}`}
						loading="eager"
						decoding="async"
						src={image.src}
						alt={image.alt}
						class="aspect-2/1 w-full rounded-xl bg-gray-100 object-cover shadow-lg"
					/>
				</figure>

				<Prose>
					<slot />
				</Prose>

				<AuthorBox />
			</article>

			<PostSocialShare title={title} description={description} />
		</main>

		<PageFooter />
	</body>
</html>
